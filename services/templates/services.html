{% extends 'base.html' %}
{% load i18n admin_tools_menu_tags %}
	{% block head %}
	{{ block.super }}
	<link rel="stylesheet" href="{{ MEDIA_URL }}css/map.css">
	<script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key={{ key }}&sensor=TRUE">
    </script>

	{% endblock %}

	{% block content %}
		{{ block.super }}
		{% block breadcrumbs %}
			<ul class="breadcrumbs">
				<li><a href="../">{% trans "Home" %}</a></l>
				<li>{% trans "Services" %}</li>
			</ul>
		{% endblock %}
        <h3>{% trans "Services" %}</h3>
        <p> <b>{% trans 'UE "Seafood-Service"' %}</b>{% trans " provides a range of freight forwarding delivery services by wagonloads and containers train shipment:" %}</p>
        <div class="main_services">
		{% for service in main_services %}
			<div>
				<img src="{{MEDIA_URL}}{{service.image}}" alt="">
				{% if service.decription %}
					<p>{{ service.decription }}</p>
				{% endif %}
			</div>
		{% endfor %}
        </div>
		{% if extra_services %}
			<h3>Дополнительные услуи</h3>
			<div class="extra_services">
			{% for service in extra_services %}
					<div class="extra_service">
						<img src="{{MEDIA_URL}}{{service.image}}" alt="">
						<p>{{ service.decrption }}</p>
					</div>
			{% endfor %}
			</div>
		{% endif %}
	{% block geography_of_transport %}
	
	<div class="map"><img src="{{ MEDIA_URL }}css/images/map.png" class="imgMap" alt="" />
		<div data-coords="120, 189" class="marker meet">
		<h3>22 - 24 апреля 2014 года</h3>
		<p>Mexico World Trade Centre, Мексика</p>
		</div>
		<div class="marker meet" data-coords="673, 240">
		<h3>16 October - 18 October</h3>
		<p>Franchising &amp; Licensing Asia 2014 Singapore, Singapore</p>
		</div>
		<div class="marker meet" data-coords="193, 140">
		<h3>19 June - 21 June 2014</h3>
		<p>International Franchise Expo, New York City, USA</p>
		</div>
		<div class="marker meet" data-coords="402, 89">
		<h3>14 Marсh - 15 March   2014 года</h3>
		<p>The British &amp; International Franchise Exhibition, London, UK</p>
		</div>
		<div class="marker pred" data-coords="670, 167">
		<h3>09 May - 11 May  2014</h3>
		<p>The 16th Chinese Convention &amp; Exhibition, Beijing, China</p>
		</div>
		<div class="marker meet" data-coords="403, 109">
		<h3>23 - 26 March 2014 года</h3>
		<p>Franchise Expo Paris, Paris, France</p>
		</div>
	</div>

<script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/craftmap.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/map_init.js"></script> <script language="javascript">
$(document).ready(function () {
  var map = $(".imgMap"), mapX = map.offset().left, mapY = map.offset().top;
  // Следующую строку расскомментировать выскакивания подсказки с координатами куда нажала мышка.
  // $(".imgMap").click(function (e) {alert((e.pageX - mapX - 7) + ", " + (e.pageY - mapY - 7));});
});
</script>

		{% if transporation_points %}
			<h3 class="geography">География перевозок</h3>
			<div id="transporation_points" style="display:none">
				{% for i, point in transporation_points %}
				{{ point }}
					<div id="point_{{ i }}">
						<a id="longitude_{{ i }}">{{ point.longitude }}</a>
						<a id="latitude_{{ i }}">{{ point.latitude }}</a>
						<a id="title_{{ i }}">{{ point.title }}</a>
						<a id="description_{{ i }}">{{ point.description }}</a>
					</div>
				{% endfor %}
			</div>
			<div id="map-canvas" ></div>
		<style type="text/css">
		  #map_canvas { 
			height: 800px;
			width:800px;
			}
		</style>
		<script type="text/javascript">
		
		function initialize() {
			var myLatlng = new google.maps.LatLng({{ center_latitude }}, {{ center_longitude }});
			var mapOptions = {
				zoom: 1.3,
				center: myLatlng
			}
			var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
			var points = $('#transporation_points').children().toArray();
			var marker = new Array();
			for(var i=0; i<points.length; i++){
				marker[i] = new google.maps.Marker({
					position: new google.maps.LatLng(parseFloat($('#latitude_'+i).text()), parseFloat($('#longitude_'+i).text())),
					map: map,
					icon: '{{ MEDIA_URL }}css/images/google_map_point.png',
					title: $('#title_'+i).text(),
				});		
				marker[i].info = new google.maps.InfoWindow({ 
					content: '<a style="width:40px; height: 30px;"><p style="color: red;">'+$('#title_'+i).text()+'</p>'+$('#description_'+i).text()+'</a>',
				});
				google.maps.event.addListener( marker[i], 'click', function() {
						marker[i].info.open(map);
				});
			}
		var styler = [
		  {
			"featureType": "administrative",
			"elementType": "geometry",
			"stylers": [
			  { "visibility": "on" },
			  { "color": "#c6c5c3" }
			]
		  },{
			"featureType": "road",
			"elementType": "labels",
			"stylers": [
			  { "visibility": "on" },
			  { "color": "#c6c5c5" }
			]
		  },{
			"featureType": "landscape.natural",
			"stylers": [
			  { "visibility": "on" },
			  { "color": "#c9c6c5" }
			]
		  },{
			"featureType": "water",
			"elementType": "geometry",
			"stylers": [
			  { "visibility": "on" },
			  { "color": "#f2f2f2" }
			]
		  },{
			"featureType": "water",
			"elementType": "labels",
			"stylers": [
			  { "visibility": "off" }
			]
		  },{
			"featureType": "administrative",
			"elementType": "labels",
			"stylers": [
			  { "visibility": "off" }
			]
		  },{
		  }
		]
			map.setOptions({styles: styler});
		}
		google.maps.event.addDomListener(window, 'load', initialize);
		</script>
		{% endif %}
	{% endblock %}
{% endblock %}