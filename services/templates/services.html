{% extends 'base.html' %}
{% load i18n admin_tools_menu_tags %}
	{% block head %}
	{{ block.super }}
      <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
	{% endblock %}

	{% block content %}
		{{ block.super }}
		{% block breadcrumbs %}
			<ul class="breadcrumbs">
				<li><a href="../">{% trans "Home" %}</a></l>
				<li>{% trans "Services" %}</li>
			</ul>
		{% endblock %}
        <h3>{% trans "Services" %}</h3>
        <p> <b>{% trans 'UE "Seafood-Service"' %}</b>{% trans " provides a range of freight forwarding delivery services by wagonloads and containers train shipment:" %}</p>
        <div class="main_services">
		{% for service in main_services %}
			<div>
				<img src="{{MEDIA_URL}}{{service.image}}" alt="">
				{% if service.decription %}
					<p>{{ service.decription }}</p>
				{% endif %}
			</div>
		{% endfor %}
        </div>
		{% if extra_services %}
			<h3>Дополнительные услуи</h3>
			<div class="extra_services">
			{% for service in extra_services %}
					<div class="extra_service">
						<img src="{{MEDIA_URL}}{{service.image}}" alt="">
						<p>{{ service.decrption }}</p>
					</div>
			{% endfor %}
			</div>
		{% endif %}
	{% block geography_of_transport %}
		{% if transporation_points %}
			<h3 class="geography">География перевозок</h3>
			<div id="transporation_points" style="display:none">
				{% for i, point in transporation_points %}
				{{ point }}
					<div id="point_{{ i }}">
						<a id="longitude_{{ i }}">{{ point.longitude }}</a>
						<a id="latitude_{{ i }}">{{ point.latitude }}</a>
						<a id="title_{{ i }}">{{ point.title }}</a>
						<a id="description_{{ i }}">{{ point.description }}</a>
					</div>
				{% endfor %}
			</div>
			<div id="map-canvas" ></div>
		<style type="text/css">
		  #map_canvas { 
			height: 800px;
			width:800px;
			}
		</style>
		<script type="text/javascript">
		
		function initialize() {
		  var myLatlng = new google.maps.LatLng(17.412856, 50.283015);
		  var mapOptions = {
			zoom: 2,
			center: myLatlng
		  }
		  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

			var points = $('#transporation_points').children().toArray();

			var infoWindow = new google.maps.InfoWindow({ 
					content: 'myContent',
				});
			var shape = {
				  coord: [1, 1, 1, 20, 18, 20, 18 , 1],
				  type: 'poly'
			  };
			var image = new google.maps.MarkerImage('{{ MEDIA_URL }}css/images/google_map_point.png',      
				new google.maps.Size(20, 32),
				new google.maps.Point(0,0),
				new google.maps.Point(0, 32));
			var markers = new Array();
			var infoWindows = new Array();
			for(var i=0; i<points.length; i++){
					markers.push(new google.maps.Marker({
						  position: new google.maps.LatLng(parseFloat($('#latitude_'+i).text()), parseFloat($('#longitude_'+i).text())),
							map: map,
						  title: $('#title_'+i).text(),
						  zIndex:i,
						  icon: image,
					}));
					infoWindows.push(new google.maps.InfoWindow({
							  content: '<p style="color: red; margin-bottom: -10px;">'+$('#title_'+i).text()+'</p>'+$('#desription_'+i).text()
					}));
					
			}
			
			for (var i=0; i< markers.length; i++){
				var marker = markers[i];
				google.maps.event.addListener(marker, 'click', function() {
					infoWindows[i].open(map, marker);
				});
			}
		var styler = [
		  {
			"featureType": "administrative",
			"elementType": "geometry",
			"stylers": [
			  { "visibility": "on" },
			  { "color": "#c6c5c3" }
			]
		  },{
			"featureType": "road",
			"elementType": "labels",
			"stylers": [
			  { "visibility": "on" },
			  { "color": "#c6c5c5" }
			]
		  },{
			"featureType": "landscape.natural",
			"stylers": [
			  { "visibility": "on" },
			  { "color": "#c9c6c5" }
			]
		  },{
			"featureType": "water",
			"elementType": "geometry",
			"stylers": [
			  { "visibility": "on" },
			  { "color": "#f2f2f2" }
			]
		  },{
			"featureType": "water",
			"elementType": "labels",
			"stylers": [
			  { "visibility": "off" }
			]
		  },{
			"featureType": "administrative",
			"elementType": "labels",
			"stylers": [
			  { "visibility": "off" }
			]
		  },{
		  }
		]
			map.setOptions({styles: styler});
		}
		google.maps.event.addDomListener(window, 'load', initialize);
		</script>
		{% endif %}
	{% endblock %}
{% endblock %}